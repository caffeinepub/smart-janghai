{
  "kind": "build_request",
  "title": "Emergency website decommission + data wipe mode",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add a backend-wide decommission switch that, when enabled, prevents normal app usage by rejecting or disabling all non-essential canister methods (including member and admin features) with a clear English error message indicating the website has been decommissioned.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "DELETE WEBSITE NOW FROM EVERWHERE"
        ]
      },
      "acceptanceCriteria": [
        "Backend stores a persistent `isDecommissioned` (or equivalent) flag in stable state so it survives upgrades/redeploys",
        "When decommission mode is enabled, all regular feature methods (users/news/schemes/jobs/media/notifications/settings/admin/security export, etc.) are blocked in a consistent way (trap or return error) with an English message that the site is decommissioned",
        "A minimal status/read-only method remains available to allow the frontend to detect decommission state (e.g., `getSystemStatus` returning `isDecommissioned`)"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Implement an admin-only backend operation to immediately decommission the website and purge all stored application data from canister state (users, news, schemes, jobs, media metadata, notifications, website settings, activity logs, and any counters/IDs).",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "DELETE WEBSITE NOW FROM EVERWHERE"
        ]
      },
      "acceptanceCriteria": [
        "There is a single admin-only method (e.g., `decommissionAndWipeAllData`) that (1) sets decommission mode ON and (2) clears all in-canister collections and resets counters/IDs",
        "After running the wipe, subsequent reads for previously-created records return empty results / not found (as appropriate)",
        "The wipe operation records an admin activity log entry if logging is still allowed; otherwise it completes without depending on logging",
        "The operation is protected so non-admin callers cannot execute it"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add a frontend ‘Website Decommissioned’ screen and route override so that when the backend reports the app is decommissioned, all routes (home/login/dashboards/admin) are replaced with a single decommissioned message page in English.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "DELETE WEBSITE NOW FROM EVERWHERE"
        ]
      },
      "acceptanceCriteria": [
        "On initial load (and when navigating), the frontend checks backend system status and detects decommission mode",
        "If decommission mode is ON, the app renders only the decommissioned screen regardless of URL hash/route",
        "The decommissioned screen contains only English user-facing text and does not expose any admin/member functionality (no login actions)",
        "The decommissioned screen renders without relying on protected APIs that will be blocked in decommission mode (i.e., it must not crash due to blocked feature calls)"
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in backend/main.mo; only add backend/migration.mo if stable-state migration is required by the decommission flag and wipe behavior",
    "Do not edit any files under frontend/src/components/ui or any paths listed in frontend.immutablePaths (compose instead)",
    "Use English for any user-facing text"
  ],
  "nonGoals": [
    "Deleting the canister from the Internet Computer network, removing DNS records, or taking down hosting outside of this codebase",
    "Erasing data outside of canister state (e.g., external storage or third-party services)",
    "Adding new product features unrelated to decommissioning"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}